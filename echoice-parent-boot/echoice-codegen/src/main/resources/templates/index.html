<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>代码生成</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="stylesheet" href="../static/component/layui/2.2.2/css/layui.css" th:href="@{/component/layui/2.2.2/css/layui.css}"  media="all" />
    <link rel="stylesheet" href="../css/app.css" th:href="@{/css/app.css}"  media="all" />
</head>
<body>
    <div class="layui-main">
	    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
	      <legend>代码生成</legend>
	    </fieldset>
	    <div class="site-block">
		    <form class="layui-form" action="" name="codeGenForm">
		      <div class="layui-form-item">
		        <label class="layui-form-label">数据库IP</label>
		        <div class="layui-input-block">
		          <input type="text" name="dbIp" th:value="${codeGenBean.dbIp}" lay-verify="required" placeholder="请输入数据库IP" autocomplete="off" class="layui-input"/>
		        </div>
		      </div>
		      <div class="layui-form-item">
		        <label class="layui-form-label">数据库名</label>
		        <div class="layui-input-block">
		          <input type="text" name="dbName" th:value="${codeGenBean.dbName}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
		        </div>
		      </div>
	          <div class="layui-form-item">
	            <label class="layui-form-label">数据库用户</label>
	            <div class="layui-input-block">
	              <input type="text" name="dbUser" th:value="${codeGenBean.dbUser}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
	            </div>
	          </div>
	          <div class="layui-form-item">
	            <label class="layui-form-label">数据库密码</label>
	            <div class="layui-input-block">
	              <input type="text" name="dbPasswd" th:value="${codeGenBean.dbPasswd}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
	            </div>
	          </div>
	          <div class="layui-form-item">
	            <label class="layui-form-label">数据库表名</label>
	            <div class="layui-input-block">
	              <input type="text" name="dbTable" th:value="${codeGenBean.dbTable}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
	            </div>
	          </div>
              <div class="layui-form-item">
                <label class="layui-form-label">中文表名</label>
                <div class="layui-input-block">
                  <input type="text" name="dbTableNameCn" th:value="${codeGenBean.dbTableNameCn}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
                </div>
              </div>
	          <div class="layui-form-item">
	            <label class="layui-form-label">表名前缀</label>
	            <div class="layui-input-block">
	              <input type="text" name="dbTablePrefix" th:value="${codeGenBean.dbTablePrefix}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
	            </div>
	          </div>
              <div class="layui-form-item">
                <label class="layui-form-label">应用包名</label>
                <div class="layui-input-block">
                  <input type="text" name="appPackageName" th:value="${codeGenBean.appPackageName}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
                </div>
              </div>
              <div class="layui-form-item">
                <label class="layui-form-label">开发者</label>
                <div class="layui-input-block">
                  <input type="text" name="author" th:value="${codeGenBean.author}" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input"/>
                </div>
              </div>	          
			  <div class="layui-form-item">
			    <div class="layui-input-block">
			      <button class="layui-btn" lay-submit lay-filter="codeGenForm">立即提交</button>
			      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
			    </div>
			  </div>	                                        	      
		    </form>
	    </div>
    </div>
    <script type="text/javascript" src="../static/component/layui/2.2.2/layui.js" th:src="@{/component/layui/2.2.2/layui.js}"></script>
	<script th:inline="javascript">
    layui.use(['jquery','layer', 'form'], function(){
        var layer = layui.layer
        ,form = layui.form
        ,$ = layui.jquery;
        
        var dbIp = [[${codeGenBean.dbIp}]];
        //监听提交
        form.on('submit(codeGenForm)', function(data){
            var sfJson=data.field;
            var rnd=parseInt(Math.random()*1000000);
            sfJson.rnd=rnd;
            $.post("./generate",sfJson,function(data){
                layer.alert(data.msg);
            },"json");
            return false;
        });
        
        
     });
	</script>    
</body>
</html>